#newitem[5]<-"right"
newitem[3]<-items$frage[itx] #fragetext
#newitem[7]<-"default"
itemdescr<- function(item) {
nr2<-as.integer(item)/100+4
nr3<-as.character(nr2)
nr4<-"item"%s+%nr3 #need to integrate library(stringi)
newitem[1]<-itemdescr(itemd)
}
return (newitem[option])
}
print(get_question(items,3,1))
itemdescr<- function(item) {
nr2<-as.integer(item)/100+4
nr3<-as.character(nr2)
nr4<-"item"%s+%nr3 #need to integrate library(stringi)
newitem[1]<-itemdescr(itemd)
}
print(get_question(items,3,1))
item<-3
nr2<-as.integer(item)/100+4
nr3<-as.character(nr2)
nr4<-"item"%s+%nr3 #need to integrate library(stringi)
item<-4
nr2<-as.integer(item)/100+4
nr3<-as.character(nr2)
nr4<-"item"%s+%nr3 #need to integrate library(stringi)
##########################
#now adress items generale
#lines formula in section (element) <items> (antwortoptionen)
#3,5,7,9,11,13 option A1-A6
#1,2 item id and position
#4,6,8,10,12 meta all same
#formel: ax = antwortoption
#######################################################
#1.2.3. fetch questions data in itemtable
get_question <- function(dataset,itemwitch,option){
###4.2.1
#create new array with modifiying values
#get new values of group items .csv
newitem<-c()
itx<-itemwitch
items<-dataset
newitem[8]<-items$item[itx] #description
itemd<-newitem[8]
#newitem[2]<-"select"
newitem[2]<-items$kontext[itx] #kontext
newitem[4]<-"Weisen Sie der Frage die richtige Antwort zu." #explanation
#newitem[5]<-"right"
newitem[3]<-items$frage[itx] #fragetext
#newitem[7]<-"default"
itemdescr<- function(item) {
nr2<-as.integer(item)/100+4
nr3<-as.character(nr2)
nr4<-"item"%s+%nr3 #need to integrate library(stringi)
}
newitem[1]<-itemdescr(itemd)
return (newitem[option])
}
print(get_question(items,3,1))
print(get_question(items,22,1))
source("~/boxHKW/21S/essais/gith/12057/essais/docs/hux2022/12057.qscheme_essai_clean.R", echo=TRUE)
itemnr<-get_question(items,3,1)
itemnr<-get_question(items,3,2)
itemnr<-get_question(items,3,1)
#3############################
#replaces all according to itemvorlagen .csv as specified in datenset
replace_loop()
#4############################
write_xml(scheme,"qscheme_output.xml")
View(refresh_data)
xmltop_scheme<-("https://github.com/esteeschwarz/essais/raw/main/docs/hux2022/qscheme_surveylayout_top.xml")
refresh_base_top <- function(origin){
sroot<-origin
set_top<-read_xml(sroot)
return(set_top)
}
layout_top<- refresh_base_top(xmltop_scheme)
print(layout_top)
print(xml_cildren(layout_top))
print(xml_children(layout_top))
#################
#6.2 replacement in top scheme
replace_top <- function(scheme,version) {
print(xml_children(layout_top))
}
replace_top(layout_top,5)
#################
#6.2 replacement in top scheme
replace_top <- function(scheme,version) {
print(xml_children(xml_children(layout_top)))
}
replace_top(layout_top,5)
#################
#6.2 replacement in top scheme
replace_top <- function(scheme,version) {
print(xml_children(xml_children(xml_children(layout_top))))
}
replace_top(layout_top,5)
#################
#6.2 replacement in top scheme
replace_top <- function(scheme,version) {
print(xml_children(xml_children(layout_top)))
}
replace_top(layout_top,5)
#################
#6.2 replacement in top scheme
replace_top <- function(scheme,tx,version) {
scheme_top<-(xml_children(xml_children(layout_top)))
tag<-"question"
xml_attr(scheme_top[tx])
}
replace_top(layout_top,5,2)
#################
#6.2 replacement in top scheme
replace_top <- function(scheme,tx,version) {
scheme_top<-(xml_children(xml_children(layout_top)))
tag<-"question"
xml_attrs(scheme_top[tx])
}
replace_top(layout_top,5,2)
replace_top(layout_top,6,2)
#################
#6.2 replacement in top scheme
replace_top <- function(scheme,tx,version) {
scheme_top<-(xml_children(xml_children(layout_top)))
tag<-"question"
xml_attrs(scheme_top[tx[1]])
}
replace_top(layout_top,6,2)
#################
#6.2 replacement in top scheme
replace_top <- function(scheme,tx,version) {
scheme_top<-(xml_children(xml_children(layout_top)))
tag<-"question"
xml_attrs(scheme_top[tx],"id")
}
replace_top(layout_top,6,2)
#################
#6.2 replacement in top scheme
replace_top <- function(scheme,tx,version) {
scheme_top<-(xml_children(xml_children(layout_top)))
tag<-"question"
xml_has_attrs(scheme_top[tx],"id")
}
replace_top(layout_top,6,2)
#################
#6.2 replacement in top scheme
replace_top <- function(scheme,tx,version) {
scheme_top<-(xml_children(xml_children(layout_top)))
tag<-"question"
xml_has_attr(scheme_top[tx],"id")
}
replace_top(layout_top,6,2)
#################
#6.2 replacement in top scheme
replace_top <- function(scheme,tx,version) {
scheme_top<-(xml_children(xml_children(layout_top)))
tag<-"question"
xml_attr(scheme_top[tx],"id")
}
replace_top(layout_top,6,2)
replace_top(layout_top,7,2)
#################
#6.2 replacement in top scheme
refresh_top <- function(scheme,tx,version) {
scheme_top<-(xml_children(xml_children(layout_top)))
tag<-"question"
xml_attr(scheme_top[tx],"id")
}
refresh_top(layout_top,7,2)
#################
#6.2 replacement in top scheme
refresh_top <- function(scheme,tx,version) {
scheme_top<-(xml_children(xml_children(layout_top)))
tag<-"question"
id_top<-xml_attr(scheme_top[tx],"id")
}
refresh_top(layout_top,7,2)
id_top<-refresh_top(layout_top,7,2)
#set new value
id_top<-"F"%s+%4
#################
#6.2 replacement in top scheme
refresh_top <- function(scheme,tx,version) {
scheme_top<-(xml_children(xml_children(layout_top)))
tag<-"question"
print(xml_attr(scheme_top[tx],"id"))<-"TEST"
#set new value
id_top<-"F"%s+%4
#   nr3<-as.character(nr2)
#nr4<-"item"%s+%nr3 #need to integrate library(stringi)
#(xml_attr(scheme_top[tx],"id"))
}
id_top<-refresh_top(layout_top,7,2)
#################
#6.2 replacement in top scheme
refresh_top <- function(scheme,tx,version) {
scheme_top<-(xml_children(xml_children(layout_top)))
tag<-"question"
(xml_attr(scheme_top[tx],"id"))<-"TEST"
#set new value
id_top<-"F"%s+%4
#   nr3<-as.character(nr2)
#nr4<-"item"%s+%nr3 #need to integrate library(stringi)
#(xml_attr(scheme_top[tx],"id"))
}
id_top<-refresh_top(layout_top,7,2)
#################
#6.2 replacement in top scheme
refresh_top <- function(scheme,tx,version) {
scheme_top<-(xml_children(xml_children(layout_top)))
tag<-"question"
xml_attr(scheme_top[tx],"id")<-"TEST"
#set new value
id_top<-"F"%s+%4
#   nr3<-as.character(nr2)
#nr4<-"item"%s+%nr3 #need to integrate library(stringi)
#(xml_attr(scheme_top[tx],"id"))
}
id_top<-refresh_top(layout_top,7,2)
#################
#6.2 replacement in top scheme
refresh_top <- function(scheme,tx,version) {
scheme_top<-(xml_children(xml_children(layout_top)))
tag<-"question"
xml_attr(scheme_top[tx],"id")<-"TEST"
#set new value
id_top<-"F"%s+%4
print(xml_attr(scheme_top[tx],"id"))
#   nr3<-as.character(nr2)
#nr4<-"item"%s+%nr3 #need to integrate library(stringi)
#(xml_attr(scheme_top[tx],"id"))
}
id_top<-refresh_top(layout_top,7,2)
#################
#6.2 replacement in top scheme
refresh_top <- function(scheme,tx,version) {
scheme_top<-(xml_children(xml_children(layout_top)))
tag<-"question"
string<-xml_attr(scheme_top[tx],"id")
print(stri_sub(2,2))
#set new value
id_top<-"F"%s+%4
print(xml_attr(scheme_top[tx],"id"))
#   nr3<-as.character(nr2)
#nr4<-"item"%s+%nr3 #need to integrate library(stringi)
#(xml_attr(scheme_top[tx],"id"))
}
id_top<-refresh_top(layout_top,7,2)
print(stri_sub(id_top<-refresh_top(layout_top,7,2),2,3)
print(stri_sub(id_top<-refresh_top(layout_top,7,2),2,3))
print(stri_sub(id_top(2,2)))
print(stri_sub(id_top,2,2))
id_top<-refresh_top(layout_top,7,2)
print(stri_sub(id_top,2,2))
#################
#6.2 replacement in top scheme
refresh_top <- function(scheme,tx,version) {
scheme_top<-(xml_children(xml_children(layout_top)))
tag<-"question"
string<-xml_attr(scheme_top[tx],"id")
print(stri_sub(string,2,2))
#set new value
id_top<-"F"%s+%4
print(xml_attr(scheme_top[tx],"id"))
#   nr3<-as.character(nr2)
#nr4<-"item"%s+%nr3 #need to integrate library(stringi)
#(xml_attr(scheme_top[tx],"id"))
}
id_top<-refresh_top(layout_top,7,2)
#################
#6.2 replacement in top scheme
refresh_top <- function(scheme,tx,version) {
scheme_top<-(xml_children(xml_children(layout_top)))
tag<-"question"
string<-xml_attr(scheme_top[tx],"id")
set_old<-(stri_sub(string,2,2,use_matrix=TRUE))
#set new value
id_top<-"F"%s+%4
print(xml_attr(scheme_top[tx],"id"))
#   nr3<-as.character(nr2)
#nr4<-"item"%s+%nr3 #need to integrate library(stringi)
#(xml_attr(scheme_top[tx],"id"))
}
id_top<-refresh_top(layout_top,7,2)
#################
#6.2 replacement in top scheme
refresh_top <- function(scheme,tx,version) {
scheme_top<-(xml_children(xml_children(layout_top)))
tag<-"question"
string<-xml_attr(scheme_top[tx],"id")
set_old<-(stri_sub(string,2,2,use_matrix=TRUE))
print(set_old)
#set new value
id_top<-"F"%s+%4
print(xml_attr(scheme_top[tx],"id"))
#   nr3<-as.character(nr2)
#nr4<-"item"%s+%nr3 #need to integrate library(stringi)
#(xml_attr(scheme_top[tx],"id"))
}
id_top<-refresh_top(layout_top,7,2)
#################
#6.2 replacement in top scheme
refresh_top <- function(scheme,tx,version) {
scheme_top<-(xml_children(xml_children(layout_top)))
tag<-"question"
string<-xml_attr(scheme_top[tx],"id")
set_old<-(stri_sub(string,2,2))<-version
print(set_old)
#set new value
id_top<-"F"%s+%4
print(xml_attr(scheme_top[tx],"id"))
#   nr3<-as.character(nr2)
#nr4<-"item"%s+%nr3 #need to integrate library(stringi)
#(xml_attr(scheme_top[tx],"id"))
}
id_top<-refresh_top(layout_top,7,2)
#################
#6.2 replacement in top scheme
refresh_top <- function(scheme,tx,version) {
scheme_top<-(xml_children(xml_children(layout_top)))
tag<-"question"
string<-xml_attr(scheme_top[tx],"id")
stri_sub(string,2,2)<-version
print(set_old)
#set new value
id_top<-"F"%s+%4
print(xml_attr(scheme_top[tx],"id"))
#   nr3<-as.character(nr2)
#nr4<-"item"%s+%nr3 #need to integrate library(stringi)
#(xml_attr(scheme_top[tx],"id"))
}
id_top<-refresh_top(layout_top,7,2)
#################
#6.2 replacement in top scheme
refresh_top <- function(scheme,tx,version) {
scheme_top<-(xml_children(xml_children(layout_top)))
tag<-"question"
string<-xml_attr(scheme_top[tx],"id")
stri_sub(string,2,2)<-version
#print(set_old)
#set new value
id_top<-"F"%s+%4
print(xml_attr(scheme_top[tx],"id"))
#   nr3<-as.character(nr2)
#nr4<-"item"%s+%nr3 #need to integrate library(stringi)
#(xml_attr(scheme_top[tx],"id"))
}
id_top<-refresh_top(layout_top,7,2)
id_top<-refresh_top(layout_top,7,"A")
#################
#6.2 replacement in top scheme
refresh_top <- function(scheme,tx,version) {
scheme_top<-(xml_children(xml_children(layout_top)))
tag<-"question"
string<-xml_attr(scheme_top[tx],"id")
stri_sub_replace(string,2,2,replacement=version)
#print(set_old)
#set new value
id_top<-"F"%s+%4
print(xml_attr(scheme_top[tx],"id"))
#   nr3<-as.character(nr2)
#nr4<-"item"%s+%nr3 #need to integrate library(stringi)
#(xml_attr(scheme_top[tx],"id"))
}
id_top<-refresh_top(layout_top,7,"A")
#################
#6.2 replacement in top scheme
refresh_top <- function(scheme,tx,version) {
scheme_top<-(xml_children(xml_children(layout_top)))
tag<-"question"
string<-xml_attr(scheme_top[tx],"id")
stri_sub_replace(string,2,2,replacement, value=version)
#print(set_old)
#set new value
id_top<-"F"%s+%4
print(xml_attr(scheme_top[tx],"id"))
#   nr3<-as.character(nr2)
#nr4<-"item"%s+%nr3 #need to integrate library(stringi)
#(xml_attr(scheme_top[tx],"id"))
}
id_top<-refresh_top(layout_top,7,"A")
#################
#6.2 replacement in top scheme
refresh_top <- function(scheme,tx,version) {
scheme_top<-(xml_children(xml_children(layout_top)))
tag<-"question"
string<-xml_attr(scheme_top[tx],"id")
stri_sub_replace(string,2,2,replacement=version)
#print(set_old)
#set new value
id_top<-"F"%s+%4
print(xml_attr(scheme_top[tx],"id"))
#   nr3<-as.character(nr2)
#nr4<-"item"%s+%nr3 #need to integrate library(stringi)
#(xml_attr(scheme_top[tx],"id"))
}
id_top<-refresh_top(layout_top,7,"A")
#################
#6.2 replacement in top scheme
refresh_top <- function(scheme,tx,version) {
scheme_top<-(xml_children(xml_children(layout_top)))
tag<-"question"
string<-xml_attr(scheme_top[tx],"id")
stri_sub_replace(string,2,2,replacement="VVVV")
#print(set_old)
#set new value
id_top<-"F"%s+%4
print(xml_attr(scheme_top[tx],"id"))
#   nr3<-as.character(nr2)
#nr4<-"item"%s+%nr3 #need to integrate library(stringi)
#(xml_attr(scheme_top[tx],"id"))
}
id_top<-refresh_top(layout_top,7,"A")
#################
#6.2 replacement in top scheme
refresh_top <- function(scheme,tx,version) {
scheme_top<-(xml_children(xml_children(layout_top)))
tag<-"question"
string<-xml_attr(scheme_top[tx],"id")
(stri_sub(string,2,2)<-version)
#print(set_old)
#set new value
id_top<-"F"%s+%4
print(xml_attr(scheme_top[tx],"id"))
#   nr3<-as.character(nr2)
#nr4<-"item"%s+%nr3 #need to integrate library(stringi)
#(xml_attr(scheme_top[tx],"id"))
}
id_top<-refresh_top(layout_top,7,"A")
#################
#6.2 replacement in top scheme
refresh_top <- function(scheme,tx,version) {
scheme_top<-(xml_children(xml_children(layout_top)))
tag<-"question"
(stri_sub(gxml_attr(xml_children(xml_children(layout_top)))[tx]),"id")
#  (stri_sub(string,2,2)<-version)
#print(set_old)
#set new value
# id_top<-"F"%s+%4
#print(xml_attr(scheme_top[tx],"id"))
#   nr3<-as.character(nr2)
#nr4<-"item"%s+%nr3 #need to integrate library(stringi)
#(xml_attr(scheme_top[tx],"id"))
}
#################
#6.2 replacement in top scheme
refresh_top <- function(scheme,tx,version) {
scheme_top<-(xml_children(xml_children(layout_top)))
tag<-"question"
(stri_sub(gxml_attr(xml_children(xml_children(layout_top)))[tx]),"id")
#  (stri_sub(string,2,2)<-version)
#print(set_old)
#set new value
# id_top<-"F"%s+%4
#print(xml_attr(scheme_top[tx],"id"))
#   nr3<-as.character(nr2)
#nr4<-"item"%s+%nr3 #need to integrate library(stringi)
#(xml_attr(scheme_top[tx],"id"))
}
#################
#6.2 replacement in top scheme
refresh_top <- function(scheme,tx,version) {
scheme_top<-(xml_children(xml_children(layout_top)))
tag<-"question"
(stri_sub(gxml_attr(xml_children(xml_children(layout_top)))[tx]),"id")
#  (stri_sub(string,2,2)<-version)
#print(set_old)
#set new value
# id_top<-"F"%s+%4
#print(xml_attr(scheme_top[tx],"id"))
#   nr3<-as.character(nr2)
#nr4<-"item"%s+%nr3 #need to integrate library(stringi)
#(xml_attr(scheme_top[tx],"id"))
}
#################
#6.2 replacement in top scheme
refresh_top <- function(scheme,tx,version) {
scheme_top<-(xml_children(xml_children(layout_top)))
tag<-"question"
(stri_sub(gxml_attr(xml_children(xml_children(layout_top)))[tx]),"id")
#  (stri_sub(string,2,2)<-version)
#print(set_old)
#set new value
# id_top<-"F"%s+%4
#print(xml_attr(scheme_top[tx],"id"))
#   nr3<-as.character(nr2)
#nr4<-"item"%s+%nr3 #need to integrate library(stringi)
#(xml_attr(scheme_top[tx],"id"))
}
(stri_sub(xml_attr(xml_children(xml_children(layout_top))[2]),"id"),1,1)<-version)
xml_attr(xml_children(xml_children(layout_top)[2]),"id")
xml_attr(xml_children(xml_children(layout_top)[7]),"id")
(stri_sub(xml_attr(xml_children(xml_children(layout_top)[7]),"id"),1,1)<-version)
(stri_sub(xml_attr(xml_children(xml_children(layout_top)[7]),"id"),1,1)<-5)
(stri_sub(xml_attr(xml_children(xml_children(layout_top)[7]),"id"),1,1)<-"SS")
stri_sub(xml_attr(xml_children(xml_children(layout_top)[7]),"id"),1,1)
stri_sub(xml_attr(xml_children(xml_children(layout_top)[7]),"id"),1,2)
stri_sub(xml_attr(xml_children(xml_children(layout_top)[7]),"id"),1,3)
stri_sub(xml_attr(xml_children(xml_children(layout_top)[7]),"id"),1,4)
stri_sub(xml_attr(xml_children(xml_children(layout_top)[7]),"id"),1,5)
stri_sub(xml_attr(xml_children(xml_children(layout_top)[7]),"id"),1,8)
stri_sub(xml_attr(xml_children(xml_children(layout_top)[7]),"id"),1,20)
stri_sub(xml_attr(xml_children(xml_children(layout_top)[6]),"id"),1,20)
stri_sub(xml_attr(xml_children(xml_children(layout_top)[5]),"id"),1,20)
stri_sub(xml_attr(xml_children(xml_children(layout_top)[7]),"id"),1,20)
stri_sub(xml_attr(xml_children(xml_children(layout_top)[7]),"id"),1,25)
stri_sub(xml_attr(xml_children(xml_children(layout_top)[7]),"id"),1,25)<-"DD"
stri_sub(xml_attr(xml_children(xml_children(layout_top)[7]),"id"),1,25)
(stri_sub(xml_attr(xml_children(xml_children(layout_top)[7]),"id"),1,25)<-"BB")
(stri_sub(xml_attr(xml_children(xml_children(layout_top)[7]),"id"),1,25))
